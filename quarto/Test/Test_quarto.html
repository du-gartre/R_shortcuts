<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David U. Garibay-Treviño, M.Sc.">
<meta name="dcterms.date" content="2023-10-16">

<title>RStudio shourtcuts that will save your life</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Test_quarto_files/libs/clipboard/clipboard.min.js"></script>
<script src="Test_quarto_files/libs/quarto-html/quarto.js"></script>
<script src="Test_quarto_files/libs/quarto-html/popper.min.js"></script>
<script src="Test_quarto_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Test_quarto_files/libs/quarto-html/anchor.min.js"></script>
<link href="Test_quarto_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Test_quarto_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Test_quarto_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Test_quarto_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Test_quarto_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">RStudio shourtcuts that will save your life</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">RStudio</div>
                <div class="quarto-category">Shortcuts</div>
                <div class="quarto-category">Snippets</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>David U. Garibay-Treviño, M.Sc. </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 16, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#insert" id="toc-insert" class="nav-link" data-scroll-target="#insert">1. Insert</a></li>
  <li><a href="#move-between-panes-and-tabs" id="toc-move-between-panes-and-tabs" class="nav-link" data-scroll-target="#move-between-panes-and-tabs">2. Move between panes and tabs</a></li>
  <li><a href="#find-files-and-functions" id="toc-find-files-and-functions" class="nav-link" data-scroll-target="#find-files-and-functions">4. Find files and functions</a></li>
  <li><a href="#autocompletion" id="toc-autocompletion" class="nav-link" data-scroll-target="#autocompletion">5. Autocompletion</a></li>
  <li><a href="#running-code" id="toc-running-code" class="nav-link" data-scroll-target="#running-code">6. Running code</a></li>
  <li><a href="#snippets" id="toc-snippets" class="nav-link" data-scroll-target="#snippets">7. Snippets</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<hr>
<p>Once you have started your journey as an R code developer, and you have had some experience writting scripts and code in general, then you may have thought “can this code be written faster?” either for simple or for large scale projects.</p>
<p>If you have kept thinking on how to speed up your code writting process or even if you only want to be more comfortable writing code, then you have arrived to the right place!</p>
<p>In this brief tutorial I will try my best to share some of the most used shortcuts in R + RStudio, according to my experience and to that of other users that have also talked on the subject (check references). To make this tutorial a little bit more intuitive, I will break the shortcuts in the next categories: a. b. c.</p>
<p>Besides, I will show the shortcut as it should be typed for both, windows and mac in the following format:</p>
<table class="table">
<caption><strong>Show keyboard shortcuts help</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Alt+Shift+K</td>
<td style="text-align: center;">Option+Shift+K</td>
</tr>
</tbody>
</table>
<p><strong>Show keyboard shortcuts help</strong> is the first shortcut we will see. What it does is showing us a list of some of the most useful shortcuts in the screen. To exit this screen you just have to press <code>Escape</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/help.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>In case you need to check the full list of shortcuts, in the upper right corner of the help screen you will find a link called <strong>See All Shortcuts</strong> which will take you to a page containing all the RStudio shortcuts for specified for Mac, Windows and Linux.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Talk about the github repo! Additional to this</p>
<p>CTRL = ⌘ Command Alt = ⌥ Option</p>
</div>
</div>
</section>
<section id="insert" class="level1">
<h1>1. Insert</h1>
<hr>
<p>Want a new R Script? easy-peasy!</p>
<table class="table">
<caption><strong>Create a new R Script</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctr+Shift+N</td>
<td style="text-align: center;">Cmd+Shift+N</td>
</tr>
</tbody>
</table>
<p>You want to assign an object? Instead of pressing <code>&lt;</code> and then <code>-</code>, you can do it directly by pressing:</p>
<table class="table">
<caption><strong>Insert assignment operator <code>&lt;-</code></strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Alt+-</td>
<td style="text-align: center;">Option+-</td>
</tr>
</tbody>
</table>
<p>While concatenating functions or operations, forget about writing the pipe by hand. You can insert it directly using this shortcut.</p>
<table class="table">
<caption><strong>Insert pipe operator<code>%&gt;%</code> or <code>|&gt;</code></strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Shift+M</td>
<td style="text-align: center;">Cmd+Shift+M</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled" title="Defining the default pipe in global options">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defining the default pipe in global options
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The pipe that is going to be inserted is the one defined in <code>Global Options</code>.</p>
<p>You can preset the type of pipe you want to insert by accessing <code>Global Options/Code/Editing</code> and defining which pipe you would like to use.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/pipe.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Defining the default pipe in RStudio</figcaption>
</figure>
</div>
</div>
</div>
</div>
<table class="table">
<caption><strong>Insert code chunk (for Quarto and RMarkdown)</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Alt+Ctrl+I</td>
<td style="text-align: center;">Option+Cmd+I</td>
</tr>
</tbody>
</table>
<table class="table">
<caption><strong>Comment/uncomment current line selection</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Shift+C</td>
<td style="text-align: center;">Cmd+Shift+C</td>
</tr>
</tbody>
</table>
<table class="table">
<caption><strong>Insert section break</strong> (ideal for code outlines)</caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Shift+R</td>
<td style="text-align: center;">Cmd+Shift+R</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The section breaks have the same structure as the Quarto and RMarkdown headers.</p>
<ul>
<li><code>#</code> stands for 1st level header,</li>
<li><code>##</code> stands for 2nd level headers,</li>
<li><code>###</code> stands for 3rd level headers, and so on.</li>
</ul>
</div>
</div>
<table class="table">
<caption><strong>Reindent selection</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+I</td>
<td style="text-align: center;">Cmd+I</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Reindent selection</li>
</ul>
</div>
</div>
</section>
<section id="move-between-panes-and-tabs" class="level1">
<h1>2. Move between panes and tabs</h1>
<hr>
<p>In case that you want to move your cursor without taking your hands out of the keyboard, you can use the following shortcuts:</p>
<table class="table">
<caption><strong>Move cursor to Source Editor</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+1</td>
<td style="text-align: center;">Ctrl+1</td>
</tr>
</tbody>
</table>
<table class="table">
<caption><strong>Move cursor to Console</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+2</td>
<td style="text-align: center;">Ctrl+2</td>
</tr>
</tbody>
</table>
<p>In my case I mainly use the shortcuts to change the cursor between the Source Editor and the Console. However, you can focus the following elements using the same key combinations:</p>
<ul>
<li>1 - Source Editor</li>
<li>2 - Console</li>
<li>3 - Help</li>
<li>4 - History</li>
<li>5 - Files</li>
<li>6 - Plots</li>
<li>7 - Packages</li>
<li>8 - Environment</li>
<li>9 - Viewer</li>
</ul>
<p>The team in RStudio have also thought on case you want to move between tabs without taking your hands out of the keyboard. You can open tabs that are next to the one you are currently working by typing:</p>
<table class="table">
<caption><strong>Open previous/next tab</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Alt+Left/Right</td>
<td style="text-align: center;">Cmd+Option+Left/Right</td>
</tr>
</tbody>
</table>
<p>In case you have many tabs open, the previous shortcut may not be practical. If you know the name of the tab you want to access, you can open it directly by typing the following:</p>
<table class="table">
<caption><strong>Switch to tab</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Shift+.</td>
<td style="text-align: center;">Cmd+Shift+.</td>
</tr>
</tbody>
</table>
<p>This last shortcut shows a list of all the tabs that are currently open. You can look for a specific tab by writing its name and then you can access it by pressing <code>enter</code>.</p>
</section>
<section id="find-files-and-functions" class="level1">
<h1>4. Find files and functions</h1>
<hr>
<p>The following shortcuts serve you to look for specific words in the scripts and files that you are currently developing. This same set of tools will also let you replace all the text that matches your search.</p>
<p>Let’s start with <strong>Find/Replace text</strong></p>
<table class="table">
<caption><strong>Find/Replace text</strong> (in active tab)</caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+F</td>
<td style="text-align: center;">Cmd+F</td>
</tr>
</tbody>
</table>
<p>This will appear a find/replace utility that will be very useful. You can highlight one by one all the texts that match your search or you can select all of them at once. It also lets you replace all the matches with another text. When you select multiple lines of code, by default, the search and replace utility will only look into the selected code. You can modify the behavior of this utility by activating/deactivating the options that are shown.</p>
<p>The <strong>Go to file/function</strong> shortcut will show let you either access the files where you have defined specific functions or open files that are present in your current working directory. To do this, you will have to type the name or the function or file that you want to check and then press <code>enter</code>.</p>
<table class="table">
<caption><strong>Go to file/function</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+.</td>
<td style="text-align: center;">Cmd+.</td>
</tr>
</tbody>
</table>
<p>If you don’t remember where you left a specific file, but you do remember parts of it, <strong>Find in files</strong> is an utility that will be of great help. It lets you find any text that matches your search in <em>all the files that are under your working directory</em>. It will list you all the matches by the files where they are located. Just as <strong>Find/replace text</strong> this utility also lets you replace all the matches with specified text.</p>
<table class="table">
<caption><strong>Find in files</strong></caption>
<colgroup>
<col style="width: 52%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Windows <img src="figs/windows.png" class="img-fluid" style="width:5.0%"></th>
<th style="text-align: center;">Mac <img src="figs/apple.png" class="img-fluid" style="width:6.5%"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ctrl+Shift+F</td>
<td style="text-align: center;">Cmd+Shift+F</td>
</tr>
</tbody>
</table>
</section>
<section id="autocompletion" class="level1">
<h1>5. Autocompletion</h1>
<hr>
<!-- Tab to open and complete -->
<!-- Esc to close -->
<!-- Ctrl/Cmd + Space to open -->
<ul>
<li>code autocompletion</li>
<li>path autocompletion
<ul>
<li>“” Working directory</li>
<li>“/” Root directory</li>
<li>“../” Move one level up</li>
</ul></li>
</ul>
</section>
<section id="running-code" class="level1">
<h1>6. Running code</h1>
<ul>
<li>Run current line</li>
<li>Run current line (Witout moving the cursor)</li>
<li>Run the script from the <em>B</em>eginning to the current line and</li>
<li>Run the script from the current line to the <em>E</em>nd |</li>
</ul>
</section>
<section id="snippets" class="level1">
<h1>7. Snippets</h1>
<ul>
<li>Create your own snippets!</li>
</ul>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<hr>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Talk about the github repo!</p>
</div>
</div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Cite this page: Lehmann, L. (2023, April 18). <em>Introduction to Social Media Scraping</em>. Hertie Coding Club. <a href="https://www.hertiecodingclub.com/learn/rstudio/social_media_scraping/">URL</a></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>